#!/usr/bin/env coffee
# -*- mode: Coffee -*-
# vim:ft=coffee ts=2 sw=2 et :

fs = require 'fs'
events = require 'events'

wordnet = require '../src/wordnet'

emitter = new events.EventEmitter()
parserStream = new wordnet.ParserStream emitter, true

fs.createReadStream(process.argv[2])
.pipe parserStream

for tag in ["LexicalEntry", "Synset", "SenseAxis"]
  emitter.on tag, (tag, data)->
    console.log tag, data.id

emitter.on "Lexicon", (tag, data)->
  console.log data.languageCoding, data.label, data.language, data.owner, data.version
